<!DOCTYPE html>
<html lang="es">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>LORE</title>
    <link rel="icon" type="image/x-icon"
        href="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/exerted.ico">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/exerted.ico">
    <link rel="manifest" href="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Winky+Rough:wght@300..900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-beta.1/css/select2.min.css" rel="stylesheet" />
    <!-- <script src="cardTextTranslations.js"></script> -->
</head>

<body>
    <header>
        <div class="header-top">
            <input type="text" id="filter-name" placeholder="Buscar por nombre">
        </div>

        <div class="filters">
            <label>Set
                <select id="filter-set">
                    <option value="">Selecciona un set</option>
                </select>
            </label>

            <label>Color
                <div style="display: flex; align-items: center; gap: 10px;">

                    <div class="toggle-ink-mode" id="toggle-ink-mode" data-state="0">
                        <img id="toggle-ink-mode-img"
                            src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/ink.png"
                            alt="Tinta única y dual" style="filter: opacity(20%);" />
                    </div>
                    <select id="filter-color">
                        <option value="">Todos</option>
                        <option value="Amber"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/amber.png">
                            Ámbar</option>
                        <option value="Amethyst"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/amethyst.png">
                            Amatista</option>
                        <option value="Emerald"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/emerald.png">
                            Esmeralda</option>
                        <option value="Ruby"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/ruby.png">
                            Rubi</option>
                        <option value="Sapphire"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/sapphire.png">
                            Zafiro</option>
                        <option value="Steel"
                            data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/steel.png">
                            Acero</option>
                    </select>
                </div>
            </label>

            <label>Rareza
                <select id="filter-rarity">
                    <option value="">Todas</option>
                    <option value="Common"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/common.png">
                        Comun</option>
                    <option value="Uncommon"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/uncommon.png">
                        No comun</option>
                    <option value="Rare"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/rare.png">
                        Rara</option>
                    <option value="Super_rare"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/super_rare.png">
                        Super Rara</option>
                    <option value="Legendary"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/legendary.png">
                        Legendaria</option>
                    <option value="Enchanted"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/enchanted.png">
                        Encantada</option>
                    <option value="Epic"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/epic.png">
                        Epica</option>
                    <option value="Iconic"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/iconic.png">
                        Iconica</option>
                    <option value="Promo"
                        data-image="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/promo.png">
                        Promo</option>
                </select>
            </label>

            <label>Tipo
                <select id="filter-type">
                    <option value="">Todos</option>
                    <option value="Character">Personaje</option>
                    <option value="Item">Item</option>
                    <option value="Action">Accion</option>
                    <option value="Song">Cancion</option>
                </select>
            </label>
        </div>

        <div class="filters-actions">
            <button id="apply-filters">Buscar</button>
        </div>

        <div class="toggle-header" id="toggle-header">
            <span>&#9650;</span> <!-- Flecha hacia abajo -->
        </div>
    </header>

    <main>
        <div id="cards" class="card-list">Usa los filtros para buscar cartas.</div>
    </main>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content" id="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <div id="modal-body">Cargando...</div>
        </div>
    </div>

    <!-- SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT SCRIPT -->


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Incluir Select2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-beta.1/js/select2.min.js"></script>

    <script>


        let cardTextTranslations = {};

        // Cargar el archivo JSON
        async function loadCardTextTranslations() {
            try {
                const response = await fetch('https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/cardTextTranslations.json');
                cardTextTranslations = await response.json();
            } catch (error) {
                console.error('Error al cargar cardTextTranslations.json:', error.message);
            }
        }

        // Llama a la función para cargar el JSON al inicio
        loadCardTextTranslations();

        $('#filter-color').select2({
            templateResult: function (option) {
                if (!option.id) return option.text;
                const img = $(option.element).data('image');
                return $('<span style="position:relative;bottom:10px"><img src="' + img + '" style="position:relative;"/> ' + option.text + '</span>');
            },
            templateSelection: function (option) {
                if (!option.id) return option.text;
                const img = $(option.element).data('image');
                return $('<span style="position:relative;bottom:4px"><img src="' + img + '" style="width:20px; position:relative;bottom:-5px"/> ' + option.text + '</span>');
            }
        });
        $('#filter-rarity').select2({
            templateResult: function (option) {
                if (!option.id) return option.text;
                const img = $(option.element).data('image');
                return $('<span style="position:relative;bottom:10px"><img src="' + img + '" style="position:relative;"/> ' + option.text + '</span>');
            },
            templateSelection: function (option) {
                if (!option.id) return option.text;
                const img = $(option.element).data('image');
                return $('<span style="position:relative;bottom:4px"><img src="' + img + '" style="width:20px; position:relative;bottom:-5px"/> ' + option.text + '</span>');
            }
        });
        // Cargar los sets disponibles
        async function loadSets() {
            const setSelect = document.getElementById('filter-set');
            try {
                const response = await fetch('https://api.lorcast.com/v0/sets');
                const sets = await response.json(); // La respuesta tiene una propiedad `results`
                console.log(sets); // Inspecciona la estructura de la respuesta

                // Añadir la opción "Todos"
                const allOption = document.createElement('option');
                allOption.value = 'all'; // Valor especial para "Todos"
                allOption.textContent = 'Todos los sets';

                setSelect.appendChild(allOption);

                // Accede a `results` para obtener el array de sets
                sets.results.reverse().forEach(set => {
                    const option = document.createElement('option');
                    option.value = set.id; // ID del set
                    option.textContent = `${set.name} (${set.code})`; // Nombre y código del set
                    setSelect.appendChild(option);
                });

            } catch (e) {
                console.error('Error al cargar los sets:', e.message);
            }
        }

        const toggleInkMode = document.getElementById('toggle-ink-mode');
        const toggleInkModeImg = document.getElementById('toggle-ink-mode-img');
        toggleInkMode.addEventListener('click', () => {
            const states = [
                { src: 'https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/ink.png', alt: 'Tinta única y dual', style: 'filter: opacity(20%);' },
                { src: 'https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/singleink.png', alt: 'Tinta única', style: 'filter: opacity(80%);' },
                { src: 'https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/dualink.png', alt: 'Solo tintas duales', style: 'filter: opacity(80%);' }
            ];
            let currentState = parseInt(toggleInkMode.getAttribute('data-state'), 10);
            currentState = (currentState + 1) % 3; // Cambiar entre 0, 1 y 2
            toggleInkMode.setAttribute('data-state', currentState);
            toggleInkModeImg.src = states[currentState].src;
            toggleInkModeImg.alt = states[currentState].alt;
            toggleInkModeImg.style = states[currentState].style;
        });

        function matchesInkMode(card, color, inkMode) {
            if (!color) {
                switch (inkMode) {
                    case 0: // Tinta única y dual
                        return card.ink || card.inks.length === 2;
                    case 1: // Tinta única
                        return !card.inks || card.inks.length === 1;
                    case 2: // Solo tintas duales
                        return !card.ink && card.inks.length === 2;
                    default:
                        return false; // Por seguridad, si el inkMode no es válido
                }
            }
            else {
                switch (inkMode) {
                    case 0: // Tinta única y dual
                        return card.ink === color || (!card.ink && card.inks.includes(color) && card.inks.length === 2);
                    case 1: // Tinta única
                        return card.ink === color && (!card.inks || card.inks.length === 1);
                    case 2: // Solo tintas duales
                        return !card.ink && card.inks.includes(color) && card.inks.length === 2;
                    default:
                        return false; // Por seguridad, si el inkMode no es válido
                }
            }
        }

        // Obtener las cartas de un set específico
        async function fetchCardsBySet() {
            const container = document.getElementById('cards');
            const setId = document.getElementById('filter-set').value;

            container.innerHTML = 'Cargando...';

            // Obtener los valores de los filtros
            const name = document.getElementById('filter-name').value.trim().toLowerCase();
            const color = document.getElementById('filter-color').value;
            const rarity = document.getElementById('filter-rarity').value;
            const type = document.getElementById('filter-type').value;
            const inkMode = parseInt(toggleInkMode.getAttribute('data-state'), 10);

            try {
                let cards = [];

                if (setId === 'all') {
                    // Si se selecciona "Todos", obtener las cartas de todos los sets
                    const response = await fetch('https://api.lorcast.com/v0/sets');
                    const sets = await response.json();
                    for (const set of sets.results) {
                        const setResponse = await fetch(`https://api.lorcast.com/v0/sets/${set.id}/cards`);
                        const setCards = await setResponse.json();
                        cards = cards.concat(setCards); // Combinar las cartas de todos los sets
                    }
                } else {
                    // Obtener las cartas de un set específico
                    const response = await fetch(`https://api.lorcast.com/v0/sets/${setId}/cards`);
                    cards = await response.json();
                }

                // Filtrar las cartas según los valores seleccionados
                const filteredCards = cards.filter(card => {
                    const matchesName = !name ||
                        card.name.toLowerCase().includes(name) ||
                        (card.version && card.version.toLowerCase().includes(name));
                    const matchesColor = matchesInkMode(card, color, inkMode);
                    const matchesRarity = !rarity || card.rarity === rarity;
                    const matchesType = !type || card.type.includes(type);

                    return matchesName && matchesColor && matchesRarity && matchesType;
                });

                // Mostrar las cartas
                container.innerHTML = '';
                if (filteredCards.length === 0) {
                    container.innerHTML = 'No se encontraron cartas con los filtros seleccionados.';
                    return;
                }

                filteredCards.forEach(card => {

                    // Verificar la disponibilidad de las imágenes
                    const imageUri = card.image_uris.digital.normal ||
                        card.image_uris.digital.large ||
                        card.image_uris.digital.small ||
                        'https://via.placeholder.com/150'; // Imagen predeterminada

                    const img = document.createElement('img');
                    img.className = 'card';
                    img.src = imageUri;
                    img.alt = card.name;
                    img.style.cursor = 'pointer';
                    img.addEventListener('click', () => showCardModal(card));
                    container.appendChild(img);
                });
            } catch (e) {
                container.innerHTML = `Error al cargar las cartas: ${e.message}`;
            }
        }

        // Mostrar detalles de una carta en el modal
        async function showCardModal(card) {
            console.log(card);
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modal-body');
            modal.style.display = 'flex';

            // Manejar el caso en que `type` sea null o no esté definido
            const type = card.type ? card.type.join(', ') : 'Sin tipo';

            // Verificar la disponibilidad de las imágenes
            const imageUri = card.image_uris.digital.large ||
                card.image_uris.digital.normal ||
                card.image_uris.digital.small ||
                'https://via.placeholder.com/400'; // Imagen predeterminada

            // Traducir partes del texto
            let translatedText = card.text || '';

            // Detectar y excluir títulos en mayúsculas
            const titleRegex = /^([A-Z0-9\s]+)\s(.*)$/; // Detecta un título en mayúsculas seguido del resto del texto
            const match = translatedText.match(titleRegex);

            let title = '';
            let body = translatedText;

            if (match) {
                title = match[1]; // El título en mayúsculas
                body = match[2]; // El resto del texto
            }

            // Ordenar las claves de traducción por longitud (de mayor a menor)
            const sortedKeys = Object.keys(cardTextTranslations).sort((a, b) => b.length - a.length);

            // Dividir el texto en párrafos usando los saltos de línea
            const paragraphs = body.split(/\n+/); // Divide el texto por saltos de línea

            // Traducir cada párrafo individualmente
            const translatedParagraphs = paragraphs.map(paragraph => {
                sortedKeys.forEach(key => {
                    const escapedKey = key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // Escapa caracteres especiales
                    const regex = new RegExp(`(?<!\\w)${escapedKey}(?!\\w)`, 'gi'); // Asegura que sea una palabra completa

                    paragraph = paragraph.replace(regex, match => {
                        // Si la palabra está completamente en mayúsculas, no traducir
                        if (match === match.toUpperCase() && /[A-Z]/.test(match)) {
                            return match; // Devolver la palabra original
                        }
                        const translation = cardTextTranslations[key.toLowerCase()]; // Buscar siempre en minúsculas
                        if (!translation) return match; // Si no hay traducción, devolver el texto original
                        if (match[0] === match[0].toUpperCase()) {
                            return translation.charAt(0).toUpperCase() + translation.slice(1);
                        }
                        return translation; // Si no, devolver la traducción tal cual
                    });
                });
                return paragraph; // Devuelve el párrafo traducido
            });

            // Reconstruir el texto final con los párrafos separados
            body = translatedParagraphs.map(paragraph => `<p style=margin-bottom:10px;>${paragraph}</p>`).join(''); // Cada párrafo en su propio <p>

            // Traducir manualmente los valores como {S}, {I}, {W}, {L}
            const manualTranslations = {
                "{S}": '<img src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/strength.png" alt="Habilidad" style="width:20px; height:20px; vertical-align:middle; margin:0;">',
                "{I}": '<img src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/ink.png" alt="Habilidad" style="width:20px; height:20px; vertical-align:middle; margin:0;">',
                "{W}": '<img src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/will.png" alt="Habilidad" style="width:20px; height:20px; vertical-align:middle; margin:0;">',
                "{L}": '<img src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/lore.png" alt="Habilidad" style="width:10px; height:20px; vertical-align:middle; margin:0;">',
                "{E}": '<img src="https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/exerted.png" alt="Habilidad" style="width:20px; height:20px; vertical-align:middle; margin:0;">',
            };

            Object.keys(manualTranslations).forEach(key => {
                const regex = new RegExp(key, 'g'); // Buscar todas las apariciones de la clave
                body = body.replace(regex, manualTranslations[key]);
            });

            // Reconstruir el texto final con el título intacto
            translatedText = title ? `${title} ${body}` : body;

            let colorText = '';
            if (card.ink) {
                colorText = card.ink; // Si tiene un color definido, usarlo
            } else if (card.inks && card.inks.length > 0) {
                colorText = card.inks.join(' y '); // Si no tiene `ink`, usar los colores del array `inks`
            } else {
                colorText = 'Sin color'; // Si no tiene colores, mostrar "Sin color"
            }

            modalBody.innerHTML = `
            <div class="modal-content">
                <img src="${imageUri}" alt="${card.name}">
                <div class="modal-info">
                    <h2>${card.name || ''}${card.version ? ' - ' + card.version : ''}</h2>
                    ${card.classifications ? `<p>${card.classifications.join(', ')}</p>` : ''}
                    <p><strong>Tipo:</strong> ${card.type}</p>
                    <p><strong>Color:</strong> ${colorText}</p>
                    <p><strong>Rareza:</strong> ${card.rarity || 'Sin rareza'}</p>
                    <p><strong>Set:</strong> (${card.set.code || 'N/A'}) ${card.set.name || 'Sin set'}</p>
                    ${card.illustrators ? `<p><strong>Artista:</strong> ${card.illustrators.join(', ')}</p>` : ''}
                    <div class="stats">
                        ${card.cost ? `<div style="
            background-image: url(https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/ink.png),
            linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            ">
                            <span>${card.cost || 'N/A'}</span>
                            <small>Coste</small>
                        </div>` : ''}
                        ${card.strength ? `<div style="
            background-image: url(https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/strength.png),
            linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            ">
                            <span>${card.strength || 'N/A'}</span>
                            <small>Fuerza</small>
                        </div>` : ''}
                        ${card.willpower ? `<div style="
            background-image: url(https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/will.png),
            linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            ">
                            <span>${card.willpower || 'N/A'}</span>
                            <small>Voluntad</small>
                        </div>` : ''}                        
                        ${card.lore ? `<div style="
            background-image: url(https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/lore.png),
            linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            ">
                            <span>${card.lore || 'N/A'}</span>
                            <small>Lore</small>
                        </div>` : ''}
                    </div>
                ${translatedText}
                    ${card.flavor_text ? '<p class="flavor-text">' + card.flavor_text + '</p>' : ''}
                    <div class="prices">
                        ${card.prices.usd ? `<p><strong>Precio:</strong> ${card.prices.usd}$</p>` : ''}
                        ${card.prices.usd_foil ? `<p class="text-gradient-foil"><strong>Precio Foil:</strong> ${card.prices.usd_foil}$</p>` : ''}
                    </div>
                </div>
            </div>
        `;
        }

        // Cerrar modal
        document.getElementById('close-modal').onclick = function () {
            document.getElementById('modal').style.display = 'none';
        };
        window.onclick = function (event) {
            if (event.target == document.getElementById('modal')) {
                document.getElementById('modal').style.display = 'none';
            }
        };

        // Evento para buscar cartas
        document.getElementById('apply-filters').onclick = function () {
            fetchCardsBySet();
        };

        document.getElementById('toggle-header').addEventListener('click', function () {
            const header = document.querySelector('header');
            header.classList.toggle('header-collapsed'); // Alternar la clase para expandir/contraer
        });

        // Cargar los sets al inicio
        loadSets();
    </script>
    <!-- ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS ESTILOS CSS -->
    <style>
        * {
            font-family: "Winky Rough", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
        }

        body {
            margin: 0;
            padding: 0;
            background-image: url("https://raw.githubusercontent.com/LoreKeeperESP/vault/refs/heads/main/img/bg.png");
            background-size: 100% auto;
            background-repeat: repeat-y;
        }

        header {
            position: relative;
            /* Necesario para posicionar la flecha dentro del header */
            width: 90%;
            margin: 2% auto 0 auto;
            padding: 20px 10px;
            border-radius: 10px;
            background: linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            color: white;
            box-shadow: 0px 0px 20px 5px #000000;
            overflow: hidden;
            /* Asegura que el contenido no se desborde */
            transition: all 0.5s ease;
            /* Transición fluida */
        }

        .header-top {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: space-between;
        }

        .header-top h1 {
            margin: 0;
            font-size: 1.6rem;
            color: #ffffff;
            flex: 0 0 auto;
        }

        .header-top input#filter-name {
            flex: 1 1 420px;
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            outline: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .toggle-ink-mode {
            display: inline-block;
            background: linear-gradient(200deg, #cdbbff 0%, #e6e0ff 40%, #ffc9f3 70%, #e4b2d7 100%);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #3e4e4f;
            text-align: center;
            align-content: center;
            padding-top: 2px;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, .2);
            transition: all 0.3s ease;
        }

        .toggle-ink-mode:hover {
            transform: scale(1.1);
        }

        .toggle-ink-mode img {
            width: 35px;
            /* Ajusta el tamaño según sea necesario */
            height: 25px;
            object-fit: contain;
        }


        label>div {
            display: flex;
            align-items: center;
            gap: 10px;
            /* Espaciado entre el botón y el texto */
        }

        .filters {
            max-width: 1200px;
            margin: 12px auto 8px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 10px;
            padding: 12px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .filters label {
            display: flex;
            flex-direction: column;
            font-size: 0.9em;
            color: #333;
        }

        .filters select,
        .filters input {
            padding: 6px 8px;
            border: 1px solid #d0d7e0;
            border-radius: 6px;
            font-size: 0.95em;
            background: #fff;
        }

        .select2 {
            width: 100% !important;
            border-radius: 6px;
            font-size: 0.95em;
            background: #fff;
        }

        /* Botón de buscar reducido y centrado */
        .filters-actions {
            display: flex;
            justify-content: center;
        }

        .filters-actions button {
            padding: 8px 16px;
            width: 140px;
            background: linear-gradient(200deg, #cdbbff 0%, #e6e0ff 40%, #ffc9f3 70%, #e4b2d7 100%);
            background-size: 200% 200%;
            background-position: 0% 100%;
            color: #3e4e4f;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0px 2px 10px rgba(0, 0, 0, .2);
            transition: all .5s ease-in-out;
        }

        .filters-actions button:hover {
            transform: scale(1.15);
            background-position: 100% 0%;
        }

        li img {
            width: 30px;
            bottom: -10px;
        }

        .card-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            padding: 20px 50px;
            color: rgb(233, 211, 248);
            text-shadow: 0px 0px 5px #000;
        }

        .card {
            height: 300px;
            transition: all 0.2s ease;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 30%);
            border-radius: 10px;
        }

        .card:hover {
            transform: scale(1.2);
        }

        .card img {
            width: 100%;
            height: 100%;
        }

        .card p {
            margin: 10px 0;
            font-size: 0.9em;
            color: #333;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            /* Fondo oscuro para resaltar el modal */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            display: flex;
            flex-direction: row;
            background: linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            border-radius: 15px;
            overflow: hidden;
            max-width: 100%;
            width: 800px;
            position: relative;
            box-shadow: 0px 0px 10px #000000 inset;
        }

        .modal-content img {
            flex: 1;
            max-width: 50%;
            object-fit: contain;
            margin: 10px;
        }

        .modal-info {
            flex: 1;
            padding: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            color: #333;
            font-family: "Winky Rough", sans-serif;
        }

        .modal-info h2 {
            font-size: 1.8rem;
            margin: 0;
            color: #444;
        }

        .modal-info p {
            margin: 0px;
            font-size: 1rem;
            line-height: 1;
        }

        .modal-info .stats {
            display: flex;
            justify-content: space-between;
        }

        .modal-info .stats div {
            text-align: center;
            padding: 5px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            width: 50px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position-x: center;
            background-blend-mode: overlay;

        }

        .modal-info .stats div span {
            display: block;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
        }

        .modal-info .stats div small {
            font-size: 0.8rem;
            color: #888;
        }

        .modal-info .flavor-text {
            font-style: italic;
            color: #666;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            cursor: pointer;
            font-size: 24px;
            color: #333;
            background: linear-gradient(336deg, #eaf2ff 0%, #e6e0ff 40%, #ffe8f1 70%, #ffffff 100%);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.2);
            z-index: 1001;
        }

        .close-modal:hover {
            background: #f0f0f0;
        }

        .toggle-header {
            position: absolute;
            bottom: 5px;
            left: 5px;
            width: 27px;
            height: 27px;
            text-align: center;
            cursor: pointer;
            padding: 10px;
            background: linear-gradient(200deg, #ffffff 0%, #e6e0ff 40%, #ffc9f3 70%, #b387a8 100%);
            border-top: 1px solid #d0d7e0;
            border-radius: 50%;
            box-shadow: 0px 0px 4px 3px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .toggle-header span {
            font-size: 1.5rem;
            color: #333;
            display: inline-block;
            transition: transform 0.3s ease;
        }

        /* Cambiar la dirección de la flecha cuando el header está colapsado */
        .header-collapsed .toggle-header span {
            transform: rotate(180deg);
            /* Flecha hacia arriba */
            transition: all 0.3s ease;
        }

        /* Estilo para el header cuando está colapsado */
        .header-collapsed {
            height: 0px;
            /* Altura mínima del header */
            overflow: hidden;
            transition: all 0.5s ease;
            /* Transición más fluida */
        }

        /* Asegurar que el botón de la flecha siempre sea visible */
        .header-collapsed .toggle-header {
            position: absolute;
            bottom: 0;
            left: 0;
            /* margin: auto; */
            width: -webkit-fill-available;
            height: 50%;
            background: linear-gradient(200deg, #cdbbff 0%, #e6e0ff 40%, #ffc9f3 70%, #e4b2d7 100%);
            border-top: 1px solid #d0d7e0;
            border-radius: 0;
            box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.2);
        }

        .text-gradient-foil {
            background: linear-gradient(45deg, #ff00ba, #00c3ff, #ff00ba);
            -webkit-background-clip: text;
            background-size: 200% 200%;
            background-clip: text;
            color: transparent;
            width: fit-content;
            animation: rainbow 2s linear infinite;
            /* Añadir animación */
        }

        /* Definir la animación de arcoíris */
        @keyframes rainbow {
            0% {
                background-position: 0% 200%;
            }

            100% {
                background-position: 200% 0%;
            }
        }

        @media (max-width: 768px) {
            .toggle-header {
                width: 20px;
                height: 20px;
            }

            .toggle-header span {
                font-size: 1rem;
            }

            header {
                padding: 10px;
            }

            .filters {
                flex-direction: column;
                align-items: center;
                padding: 10px;
            }

            .filters label {
                width: 100%;
                text-align: left;
            }

            .filters select,
            .filters input {
                width: 100%;
            }

            li img {
                width: 20px;
                bottom: -6px;
            }

            .toggle-ink-mode:hover {
                transform: scale(1);
            }

            .card {
                height: 150px;
            }

            .card:hover {
                transform: scale(1);
            }

            .modal-content {
                flex-direction: column;
                /* Cambiar a diseño en columna */
                max-height: 95vh;
                /* Limitar la altura máxima del modal al 90% de la pantalla */
                width: 90vw;
                /* Ajustar el ancho del modal */
                overflow: hidden;
                /* Evitar desbordamiento horizontal */
            }

            .modal-content img {
                max-width: 100%;
                /* Asegurar que la imagen ocupe todo el ancho */
                height: auto;
                /* Mantener la proporción de la imagen */
                max-height: 55vh;
                /* Limitar la altura máxima de la imagen al 40% de la pantalla */
                object-fit: contain;
                /* Ajustar la imagen dentro del contenedor */
                margin: 10px 0;
            }

            .modal-info {
                flex: 1;
                overflow-y: auto;
                /* Hacer que la información sea desplazable */
                padding: 15px;
                box-shadow: 0px 0px 10px #000000 inset;
                margin: 5px;
                border-radius: 10px;
                background-color: #0000000f;
            }

            .modal-info h2 {
                font-size: 1.5rem;
            }

            .modal-info p {
                margin-bottom: 5px;
            }

            .modal-info .stats {
                margin-bottom: 5px;
            }

            .modal {
                display: none;
                justify-content: center;
                align-items: center;
                overflow-y: auto;
            }

            .card-list {
                gap: 5px;
                padding: 5px 0px;
                font-size: 1.3rem;
            }

            .select2-container--default .select2-results>.select2-results__options {
                max-height: 300px;
            }
        }
    </style>

</html>